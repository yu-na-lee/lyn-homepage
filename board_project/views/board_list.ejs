<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title><%= boardTitle %> 목록</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 90%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background-color: #f2f2f2; }
        .title-cell { text-align: left; }

        .pagination { margin-top: 20px; }
        .page-link {
            margin: 0 5px;
            text-decoration: none;
            color: #000;
        }
        .page-link.active {
            font-weight: bold;
            color: blue;
        }
    </style>
</head>
<body>
    <h1><%= boardTitle %></h1>

    <form action="/board/free" method="GET" style="margin-bottom: 20px;">
        <input type="text" name="search" placeholder="제목 검색" value="<%= searchKeyword || '' %>">
        <button type="submit">검색</button>
    </form>
    
    <table border="1" width="100%">

    <p><a href="/post/new">새 글 작성</a></p>
    
    <table>
        <thead>
            <tr>
                <th style="width: 10%;">번호</th>
                <th style="width: 50%;">제목</th>
                <th style="width: 15%;">작성자</th>
                <th style="width: 15%;">작성일</th>
                <th style="width: 10%;">조회수</th>
            </tr>
        </thead>
        <tbody>
            <% if (posts.length > 0) { %>
                <% posts.forEach(post => { %>
                    <tr>
                        <td><%= post.post_id %></td>
                        <td class="title-cell">
                            <a href="/post/<%= post.post_id %>"><%= post.title %></a>
                        </td>
                        <td><%= post.writer_name %></td>
                        <td><%= post.created_at.toISOString().split('T')[0] %></td> 
                        <td><%= post.view_count %></td>
                    </tr>
                <% }); %>
            <% } else { %>
                <tr>
                    <td colspan="5">게시물이 없습니다.</td>
                </tr>
            <% } %>
        </tbody>
    </table>
    
    <div class="pagination">
        <% for (let i = 1; i <= totalPages; i++) { %>
            <a 
                href="/board/free?page=<%= i %>"
                class="page-link <%= i === page ? 'active' : '' %>"
            >
                <%= i %>
            </a>
        <% } %>
    </div>

</body>
</html>
